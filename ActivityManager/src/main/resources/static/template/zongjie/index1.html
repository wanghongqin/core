<!DOCTYPE html>
<html>

	<head>

		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" id="viewport" content="width=320, initial-scale=1, maximum-scale=1, user-scalable=no">
		<script src="./js/template-web.js"></script>
		<script src="./js/jquery-2.0.2.min.js"></script>
		<script type="text/template" id="title">
			<section>
				<section style="margin: 10px auto;display: flex;justify-content:center;align-items: center;">
					<section style="width: 65px;flex-shrink: 0;"><img src="img/left1.png" style="max-width: 100%;" class="KolImg"></section>
					<section style="background-color: #b40700;padding: 6px 2px;text-align: center;padding: 3px 5px;margin: 0 3px;">
						<p style="margin: 0;font-size: 16px;color: #fff;">{{@value}}</p>
					</section>
					<section style="width: 65px;flex-shrink: 0;"><img src="img/right1.png" style="max-width: 100%;" class="KolImg"></section>
				</section>
			</section>
		</script>

		<script type="text/template" id="title2">
			<section style="font-family: Arial; border: 0px none; padding: 0px; color: #319369;">
				<section style="display:inline-block;"><img src="http://editor-material.oss-cn-beijing.aliyuncs.com/style/20180730/1532919987/%E5%9B%BD%E5%BA%86%EF%BC%8C%E6%A0%87%E9%A2%98_0_8898.png" style="width: auto; margin: 0px;" width="auto" height="" border="0" mapurl="" title="" alt="" _src="http://editor-material.oss-cn-beijing.aliyuncs.com/style/20180730/1532919987/%E5%9B%BD%E5%BA%86%EF%BC%8C%E6%A0%87%E9%A2%98_0_8898.png"></section>
				<section style="display:inline-block; margin-left:6px;">
					<p><span style="font-size: 16px; color: #DE2C13;">{{@value}}</span></p>
				</section>
			</section>
		</script>

		<script type="text/template" id="title3">
			<section class="KolEditor">
				<section style="margin:10px auto;display: flex;align-items: center;justify-content: center;">
					<section style="width: 55px;flex-shrink: 0;"><img src="img/flag1.png" style="max-width: 100%;"></section>
					<section style="margin-left: 5px;">
						<p style="margin: 0;font-size: 16px;color: #41628d;font-weight: 540;">{{@value}}</p>
					</section>
				</section>
			</section>
		</script>

		<script type="text/template" id="paragraph">
			<section class="KolEditor">
				<section style="margin: 10px auto;background-image:url(img/frame1.png);background-repeat: no-repeat;background-position: center;background-size:100% 100%;/* min-height:165px; */height: auto;padding:30px 20px;">
					<section style="padding: 5px;">
						<p style="margin: 0;font-size: 15px;line-height: 1.5;color:#15447a;">{{@value}}</p>
					</section>
				</section>
			</section>
		</script>
		<script type="text/template" id="paragraph2">
			<section class="KolEditor">
				<section style="margin: 10px auto;display: flex;justify-content:center;align-items: center">
					<section style="width: 85px;flex-shrink: 0;"><img src="img/one_person1.png" style="max-width: 100%;"></section>
					<section style="margin-right: 5px;">
						<p style="margin: 0;font-size: 14px;line-height: 1.5;color:#15447a ">{{@value}}</p>
					</section>
				</section>
			</section>
			<section class="KolEditor" style="undefined">
				<section style="margin: 0px auto;text-align: center;">
					<section style="max-width: 90%  !important;margin: 0px auto;text-align: center;display: inline-block;"><img src="img/_thread1.png" style="width: 100%;"></section>
				</section>
			</section>
		</script>

		<script type="text/template" id="paragraph3">
			<section style="display: flex;flex-direction: column;align-items: center;margin-top: 10px;">
				<p style="font-size: 15px;line-height: 1.5;margin: 0px;">{{@value}}</p>
				<section style="width: 80px;align-self: flex-end;margin-right: 20px;margin-top: -15px;"><img src="img/bird1.png" alt="" style="max-width: 100%;" _src="http://editor-material.oss-cn-beijing.aliyuncs.com/style/20180731/1533014009/%E6%96%B0%E5%A2%9E%E6%A8%A1%E6%9D%BF_9.png"></section>
			</section>
		</script>

		<script type="text/template" id="img">
			<section style="margin-top: 7%;">
				<section style="margin: 0px auto;text-align: center;">
					<div style="padding-left: 35px; padding-right: 35px;">
						<img src="{{@value}}" style="max-width:100%;margin:0px auto;" class="KolImg">
					</div>
				</section>
			</section>
		</script>

		<script type="text/template" id="img2">
			<section style="border: 0px none; padding: 0px;">
				<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
				<section class="Powered-by-KolEditor V5" style="position: static; box-sizing: border-box;" powered-by="KolEditor.us">
					<section class="" style="font-size: 16px; position: static; box-sizing: border-box;">
						<section class="" style="display: inline-block; width: 100%; vertical-align: top; background-image: url({{@value}}); background-position: 50% 50%; background-repeat: no-repeat; background-size: 100%; background-attachment: scroll; box-sizing: border-box;">
							<section style="position: static; width: 100%; box-sizing: border-box;" powered-by="KolEditor.us">
								<section class="" style="text-align: center; font-size: 12.8px; position: static; box-sizing: border-box;"><img style="width: 100%; height: 100%; opacity: 1; box-sizing: border-box;" class="" src="img/border1.png" data-ratio="0.628125" data-w="640"></section>
							</section>
						</section>
					</section>
				</section>
			</section>
		</script>

		<script type="text/template" id="img3">
			<section style="">
				<section style="display:inline-block;margin:0px auto;margin:10px;text-align:center;box-shadow:2px 2px 10px rgba(0,0,0,0.5);border-radius:4px;overflow:hidden;"><img src="{{@value}}" style="max-width:100%;vertical-align:bottom;"></section>
			</section>
		</script>
		<script type="text/javascript">
			var template_meta = {
				title: ['title', 'title2', 'title3'],
				paragraph: ['paragraph', 'paragraph2', 'paragraph3'],
				image: ['img', 'img2', 'img3']
			};

			(function(win) {

				win.template_meta = {
					title: ['title', 'title2', 'title3'],
					paragraph: ['paragraph', 'paragraph2', 'paragraph3'],
					image: ['img', 'img2', 'img3']
				};

				win.template_meta.render = function(config) {
					var html = "";
					var count = {};
					var title_num = -1;
					var image_num = 0;
					config.resources.map(function(item, i) {
						if(item.type == 'title') {
							if(title_num == (template_meta[item.type].length - 1)) {
								title_num = 0;
							} else {
								title_num++;
							}
						}
						count[item.type] = (count[item.type] || 0) + 1;
						var t_list = template_meta[item.type];
						if(item.type == 'paragraph' || item.type == 'title') {
							var tmp = t_list[title_num];
						} else if(item.type == 'image') {
							//							console.log(title_num);
							image_num = title_num;
							if(image_num == -1) //title个数必须和image个数一致
							{
								image_num++;
								var tmp = t_list[image_num];
							} else {
								var tmp = t_list[image_num];
							}
						}
						var h = template(tmp, item);
						html += h;
					});
					return html;
				}

			})(window);

			var config = window.config||{
				title: "哈哈哈测试",
				resources: [
				]
			};

			$(function() {

				var render = window.template_meta.render || function(config) {

					var html = "";
					var count = {};
					config.resources.map(function(item, i) {

						count[item.type] = (count[item.type] || 0) + 1;

						var t_list = template_meta[item.type];
						for(var p in t_list) {
							var tmp = t_list[p];
							var h = template(tmp, item);
							html += h;
						}
					});
					return html;

				}

				$("#main").html(render(config));
			});
		</script>
	</head>

	<body>
		<section style="margin:10px auto;display: flex;justify-content: center;align-items: center;">
			<section style="width: 35px;flex-shrink: 0;"><img src="img/person1.png" style="max-width: 100%;"></section>
			<section style="width: 225px;flex-shrink: 0;margin-bottom: -10px;"><img src="img/word1.png" style="max-width: 100%;"></section>
		</section>
		<div id="main"></div>
	</body>

</html>